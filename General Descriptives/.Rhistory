axis.title.x =element_text(size=20,family = "A"))
print(plot)
dev.off()
}
#The Industy Distribution for type 2 by Education
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",2))
png("Top dindsize for Disadvantage Type-2 by education.png",width=1200,heigh=1000,pointsize = 30)
par(family="A",mar=c(0, 0, 2, 0) + 0.1, mfrow=c(3,1))
for (i in 1:3){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("top_",i,"_indedu_disadv2.dta"))
top<-10
indnames<-paste0(data$lab4[1:top])
sub<-data[1:top,1]
c<-round(as.numeric(sub)*1000,digits = 0)
crd<-round(sub*100,digits = 1)
names(c)<-paste0(indnames," (",crd,"%)")
wc<-c(colpal,"tomato")
plot(rep(3.5,top),top:1,pch=16,col=wc,cex=c/4,
xlim=c(1.2,10),ylim=c(1,top),bty="n",xlab="",ylab="",xaxt="n",yaxt="n",main=data$lab2[1])
text(rep(4.2,top),top:1,names(c),adj=0)
}
dev.off()
# #The Most Concentrated Industry, Occupation, and Industry-Firm Size
# cat_list<-c("indly","occly","dindsize")
#
# for (j in 1:length(cat_list)){
#   for (i in 2){
# setwd("C:/Users/klin/Dropbox/Gates/R Data")
# data<-read.dta(paste0("top_",cat_list[j],"_disadv",i,".dta"))
# top<-7
# sub<-data[1:top,2:4]
# sub<-rbind(sub,c(1-sub$disadv_cum[top],"Others",1-sub$disadv_cum[top]))
# c<-as.numeric(sub$disadv)*100
# crd<-round(c,digits = 2)
# names(c)<-paste(crd,"%",sub[,2])
# setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
# png(paste0("Top ",cat_list[j]," by Disadvantage Type-",i,".png"),width=1200,heigh=800)
# par(family="A",mar=c(5, 4, 2, 2) + 0.1)
# plot<-waffle(c,reverse =T,rows = 8)+ theme(legend.text=element_text(size=25))
# print(plot)
# dev.off()
#   }
# }
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
dis<-as.numeric(data[2,2:ncol(data)])*100
m<-matrix(dis,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
text(4,6,paste(m[6,4],"%"),col="white")
dev.off()
}
newsize_label<-c("under 10","10-99","100-999","1000+")
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
dis<-as.numeric(data[2,2:ncol(data)])*100
m<-matrix(dis,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
text(4,6,paste(m[6,4],"%"),col="white")
dev.off()
}
data<-read.dta(paste0("disadv",2," by indsize.dta"))
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",2," by indsize.dta"))
View(data)
m<-matrix(data[,2],byrow=T,ncol=4)
m
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2],byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
text(4,6,paste(m[6,4],"%"),col="white")
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
text(4,6,paste(m[6,4],"%"),col="white")
dev.off()
}
x1<-x[m>50]
x1
x
m
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
dev.off()
}
for (i in 2){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
dev.off()
}
m
v<-as.vector(m)
v
x
x1<-v[v>50]
x1
x1<-x[v>50]
x1
for (i in 2){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
v<-as.vector(m)
large<-as.data.frame(x,y,v)
text(large$x[large$v>50],large$y[large$v>50],paste(large$v[large$v>50],"%"),col="white")
dev.off()
}
large$x[large$v>50]
large$x
large<-as.data.frame(x,y,v)
large
large<-data.frame(x,y,v)
large
for (i in 2){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
v<-as.vector(m)
large<-data.frame(x,y,v)
text(large$x[large$v>50],large$y[large$v>50],paste(large$v[large$v>50],"%"),col="white")
dev.off()
}
for (i in 2){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indsize.dta"))
m<-matrix(data[,2]*100,byrow=T,ncol=4)
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by indsize Type-",i,".png"),width=1200,heigh=800,pointsize = 25)
par(family="A",mar=c(4, 8, 4, 4) + 0.1,oma=c(1,1,1,1))
image(1:length(newsize_label),1:length(indgp_label),t(m),xaxt="n",yaxt = "n",xlab="",ylab = "",
col = hcl.colors(100, "Blues 3", rev = TRUE),)
box(col="white")
text(1:length(newsize_label),rep(17.5,length(newsize_label)),newsize_label,xpd=TRUE)
text(rep(0.4,length(indgp_label)),1:length(indgp_label),indgp_label,adj=1,xpd=TRUE)
mtext("Firm Size",side=3,line=2.5)
x<-rep(1:length(newsize_label),each=length(indgp_label))
y<-rep(1:length(indgp_label),length(newsize_label))
m<-round(m, digits=2)
text(x,y,paste(m,"%"))
v<-as.vector(m)
large<-data.frame(x,y,v)
text(large$x[large$v>40],large$y[large$v>40],paste(large$v[large$v>40],"%"),col="white")
dev.off()
}
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
View(data)
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(data[,2])]
m<-data[order(data[,2],)]
m<-data[order(data[,2]),]
m
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m
View(data)
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
View(m)
m<-m[1:20,]
m
barplot(m[2,],horiz = T,names.arg = m$dindsize_name)
barplot(m[,2]*100,horiz = T,names.arg = m$dindsize_name)
cen<-arplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
cen<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-1,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[1:20,]
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 10, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-1,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
#########TOP 20 DETAIL IND SIZE#######
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[1:20,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 10, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-1,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
#########TOP 20 DETAIL IND SIZE#######
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 15, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-1,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
#########TOP 20 DETAIL IND SIZE#######
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 20, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-1,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 30, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xlim=c(0,max(data[,2]*100)*1.1))
text(rep(-3,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 30, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xaxt="n")
axis(1,at=c(0,100),c(0,100))
text(rep(-5,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 35, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xaxt="n")
axis(1,at=c(0,100),c(0,100))
text(rep(-5,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=1,cex=1)
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 4, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="%",cex.names=1.2,xaxt="n")
axis(1,at=c(0,100),c(0,100))
text(rep(2,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=0,cex=1)
dev.off()
}
for (i in 1:5){
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by dindsize.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry and Size Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 4, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="% Disadvantaged",cex.names=1.2)
text(rep(2,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=0,cex=1)
dev.off()
}
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indly.dta"))
View(data)
for (i in 1:5){
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indly.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 4, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="% Disadvantaged",cex.names=1.2)
text(rep(2,length(loc)),loc,m$dindsize_name,xpd=TRUE,adj=0,cex=1)
dev.off()
}
#########TOP 20 DETAIL IND SIZE#######
for (i in 1:5){
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indly.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 4, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="% Disadvantaged",cex.names=1.2)
text(rep(2,length(loc)),loc,m$indly_name,xpd=TRUE,adj=0,cex=1)
dev.off()
}
#########TOP 20 DETAIL IND SIZE#######
for (i in 1:5){
i<-2
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta(paste0("disadv",i," by indly.dta"))
m<-data[order(-data[,2]),]
m<-m[20:1,]
setwd(paste0("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/Type ",i))
png(paste0("Disadvantage by Top Detailed Industry Type-",i,".png"),width=1200,heigh=1500,pointsize = 25)
par(family="A",mar=c(4, 4, 2, 0) + 0.1,oma=c(1,1,1,1))
loc<-barplot(m[,2]*100,horiz = T,
col=colpal[2],xlab="% Disadvantaged",cex.names=1.2)
text(rep(2,length(loc)),loc,m$indly_name,xpd=TRUE,adj=0,cex=1)
dev.off()
}
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta("hardship by disadv.dta")
View(data)
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,60),ylab="%",
main="Food Insecure")
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,30),ylab="%",
main="Food Insecure")
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,25),ylab="%",
main="Food Insecure")
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,25),ylab="%",
main="Food Insecure")
barplot(data$rent_mort*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,40),ylab="%",
main="Difficulty Paying Rent or Mortgage")
barplot(data$rent_mort*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,15),ylab="%",
main="Difficulty Paying Rent or Mortgage")
barplot(data$healthprob*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,15),ylab="%",
main="Having Fair or Poor Health")
barplot(data$tnetworth ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylab="$",
main="Having Fair or Poor Health")
barplot(data$tnetworth ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,max(data$tnetworth*1.2)),ylab="$",
main="Net Worth")
barplot(data$tnetworth/1000 ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,max(data$tnetworth*1.2)),ylab="$1,000",
main="Net Worth")
barplot(data$tnetworth/1000 ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),
ylim=c(0,max(data$tnetworth*1.2/1000)),ylab="$1,000",
main="Net Worth")
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta("hardship by disadv.dta")
setwd("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/")
png("Economic Hardship.png",width=1200,heigh=800,pointsize = 20)
par(mfrow=c(2,2),family="A",mar=c(5, 4, 2, 2) + 0.1)
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,25),ylab="%",
main="Food Insecure")
barplot(data$rent_mort*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,15),ylab="%",
main="Difficulty Paying Rent or Mortgage")
barplot(data$healthprob*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,15),ylab="%",
main="Having Fair or Poor Health")
barplot(data$tnetworth/1000 ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),
ylim=c(0,max(data$tnetworth*1.2/1000)),ylab="$1,000",
main="Personal Net Worth")
dev.off()
setwd("C:/Users/klin/Dropbox/Gates/R Data")
data<-read.dta("hardship by disadv.dta")
setwd("C:/Users/klin/Dropbox/Gates/R Output/General Descriptives/")
png("Economic Hardship.png",width=1200,heigh=800,pointsize = 20)
par(mfrow=c(2,2),family="A",mar=c(5, 4, 2, 2) + 0.1)
barplot(data$food_ins*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,25),ylab="%",
main="Food Insecure")
barplot(data$rent_mort*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,16),ylab="%",
main="Difficulty Paying Rent or Mortgage")
barplot(data$healthprob*100,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),ylim=c(0,16),ylab="%",
main="Having Fair or Poor Health")
barplot(data$tnetworth/1000 ,col =c(colpal[1],rep(colpal[2],5)),names.arg =c("All", 1:5),
ylim=c(0,max(data$tnetworth*1.2/1000)),ylab="$1,000",
main="Personal Net Worth")
dev.off()
